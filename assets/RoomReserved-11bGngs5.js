import{d as ce,V as re,s as ue,v as l,x as me,D as V,E,G as ve,o as h,c as f,b as e,u as v,f as i,t as u,z as p,A as y,H as F,F as O,g as P,a as R,h as pe,p as _e,e as he,_ as fe}from"./index-cvQsoOqD.js";import{R as L}from"./RoomService-dB8gQSya.js";import{C as N}from"./cityCountyData-3AYHRziG.js";const ge="data:image/svg+xml,%3csvg%20width='13'%20height='20'%20viewBox='0%200%2013%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.682%2017.65L5.0487%2010L12.682%202.35L10.332%200L0.332031%2010L10.332%2020L12.682%2017.65Z'%20fill='black'%20/%3e%3c/svg%3e",m="data:image/svg+xml,%3csvg%20width='4'%20height='25'%20viewBox='0%200%204%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20y='0.5'%20width='4'%20height='24'%20rx='2'%20fill='%23BF9D7D'%20/%3e%3c/svg%3e",be="data:image/svg+xml,%3csvg%20width='20'%20height='17'%20viewBox='0%200%2020%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%203.25C0%202.52065%200.289731%201.82118%200.805456%201.30546C1.32118%200.789731%202.02065%200.5%202.75%200.5H17.25C17.9793%200.5%2018.6788%200.789731%2019.1945%201.30546C19.7103%201.82118%2020%202.52065%2020%203.25V13.75C20%2014.1111%2019.9289%2014.4687%2019.7907%2014.8024C19.6525%2015.136%2019.4499%2015.4392%2019.1945%2015.6945C18.9392%2015.9499%2018.636%2016.1525%2018.3024%2016.2907C17.9687%2016.4289%2017.6111%2016.5%2017.25%2016.5H2.75C2.38886%2016.5%202.03127%2016.4289%201.69762%2016.2907C1.36398%2016.1525%201.06082%2015.9499%200.805456%2015.6945C0.550095%2015.4392%200.347532%2015.136%200.209331%2014.8024C0.0711308%2014.4687%200%2014.1111%200%2013.75V3.25ZM14.78%203.72C14.6395%203.57931%2014.4488%203.50017%2014.25%203.5H11.75C11.5511%203.5%2011.3603%203.57902%2011.2197%203.71967C11.079%203.86032%2011%204.05109%2011%204.25C11%204.44891%2011.079%204.63968%2011.2197%204.78033C11.3603%204.92098%2011.5511%205%2011.75%205H12.44L10.72%206.719C10.6463%206.78766%2010.5872%206.87046%2010.5462%206.96246C10.5052%207.05446%2010.4832%207.15377%2010.4814%207.25448C10.4796%207.35518%2010.4982%207.45521%2010.5359%207.5486C10.5736%207.64199%2010.6297%207.72682%2010.701%207.79804C10.7722%207.86926%2010.857%207.9254%2010.9504%207.96312C11.0438%208.00084%2011.1438%208.01937%2011.2445%208.01759C11.3452%208.01581%2011.4445%207.99377%2011.5365%207.95278C11.6285%207.91179%2011.7113%207.85269%2011.78%207.779L13.5%206.06V6.75C13.5%206.94891%2013.579%207.13968%2013.7197%207.28033C13.8603%207.42098%2014.0511%207.5%2014.25%207.5C14.4489%207.5%2014.6397%207.42098%2014.7803%207.28033C14.921%207.13968%2015%206.94891%2015%206.75V4.25C14.9998%204.05115%2014.9207%203.86052%2014.78%203.72ZM5.75%2013.5H8.251C8.44991%2013.5%208.64068%2013.421%208.78133%2013.2803C8.92198%2013.1397%209.001%2012.9489%209.001%2012.75C9.001%2012.5511%208.92198%2012.3603%208.78133%2012.2197C8.64068%2012.079%208.44991%2012%208.251%2012H7.561L9.281%2010.28C9.41755%2010.1385%209.49306%209.949%209.49126%209.75235C9.48946%209.5557%209.41049%209.36763%209.27137%209.22864C9.13225%209.08965%208.9441%209.01086%208.74745%209.00924C8.5508%209.00763%208.36139%209.08331%208.22%209.22L6.5%2010.938V10.248C6.5%2010.0491%206.42098%209.85832%206.28033%209.71767C6.13968%209.57702%205.94891%209.498%205.75%209.498C5.55109%209.498%205.36032%209.57702%205.21967%209.71767C5.07902%209.85832%205%2010.0491%205%2010.248V12.748C5%2012.9469%205.07902%2013.1377%205.21967%2013.2783C5.36032%2013.419%205.55109%2013.498%205.75%2013.498V13.5Z'%20fill='%23BF9D7D'%20/%3e%3c/svg%3e",ye="data:image/svg+xml,%3csvg%20width='20'%20height='15'%20viewBox='0%200%2020%2015'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18%205.5V2.5C18%201.4%2017.1%200.5%2016%200.5H4C2.9%200.5%202%201.4%202%202.5V5.5C0.9%205.5%200%206.4%200%207.5V12.5H1.33L2%2014.5H3L3.67%2012.5H16.34L17%2014.5H18L18.67%2012.5H20V7.5C20%206.4%2019.1%205.5%2018%205.5ZM9%205.5H4V2.5H9V5.5ZM16%205.5H11V2.5H16V5.5Z'%20fill='%23BF9D7D'%20/%3e%3c/svg%3e",Ce="data:image/svg+xml,%3csvg%20width='16'%20height='17'%20viewBox='0%200%2016%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%208.5C10.21%208.5%2012%206.71%2012%204.5C12%202.29%2010.21%200.5%208%200.5C5.79%200.5%204%202.29%204%204.5C4%206.71%205.79%208.5%208%208.5ZM8%2010.5C5.33%2010.5%200%2011.84%200%2014.5V16.5H16V14.5C16%2011.84%2010.67%2010.5%208%2010.5Z'%20fill='%23BF9D7D'%20/%3e%3c/svg%3e",s=g=>(_e("data-v-34ecc2ec"),g=g(),he(),g),we={class:"bg-primary-10"},xe={class:"container"},Ie={class:"row"},Ve={class:"p-5 d-flex gap-3 align-item-center"},Re=s(()=>e("img",{class:"rounded img-fluid",src:ge,alt:"Room Image"},null,-1)),Le=[Re],Ne={class:"container"},De={class:"row"},He={class:"col-md-7"},ke=s(()=>e("h3",null,"訂房資訊",-1)),Me={class:"d-flex justify-content-between"},$e=s(()=>e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"},null,-1)),Be=s(()=>e("br",null,null,-1)),Ue={class:"d-flex py-5 justify-content-between"},Ze=s(()=>e("span",null,[e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"}),i(" 訂房日期 "),e("br"),i(" 入住：12 月 4 日星期二 "),e("br"),i(" 退房：12 月 6 日星期三 ")],-1)),Ae={class:"d-flex justify-content-between"},Se=s(()=>e("span",null,[e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"}),i(" 房客人數 "),e("br"),i(" 2 人 ")],-1)),je=s(()=>e("br",null,null,-1)),Te=s(()=>e("hr",null,null,-1)),ze=s(()=>e("h3",null,"訂房人資訊",-1)),Ee={class:"py-5"},Fe=s(()=>e("label",{class:"",for:"name"},"姓名",-1)),Oe=s(()=>e("div",{class:"py-3"},null,-1)),Pe=s(()=>e("label",{for:"name"},"手機號碼",-1)),Ge=s(()=>e("div",{class:"py-3"},null,-1)),Je=s(()=>e("label",{for:"name"},"電子信箱",-1)),Xe=s(()=>e("div",{class:"py-3"},null,-1)),Ye=s(()=>e("label",{for:"name"},"地址",-1)),qe={class:"d-flex justify-content-between"},Ke=["value"],Qe=["value"],We=s(()=>e("div",{class:"py-3"},null,-1)),e0=pe('<br data-v-34ecc2ec><hr data-v-34ecc2ec><div class="py-3" data-v-34ecc2ec></div><h4 data-v-34ecc2ec>房間資訊</h4><div class="py-2" data-v-34ecc2ec></div><div class="d-flex" data-v-34ecc2ec><span data-v-34ecc2ec><img class="rounded img-fluid" src="'+m+'" alt="Room Image" data-v-34ecc2ec> 房型基本資訊 </span></div><div class="py-2" data-v-34ecc2ec></div>',7),s0={class:"d-flex justify-content-center gap-5"},t0={class:"rounded bg-white border border-1 w-25 text-center p-3"},o0=s(()=>e("img",{class:"rounded img-fluid",src:be,alt:"Room Image"},null,-1)),a0={class:"rounded bg-white border border-1 w-25 text-center p-3"},l0=s(()=>e("img",{class:"rounded img-fluid",src:ye,alt:"Room Image"},null,-1)),n0={class:"rounded bg-white border border-1 w-25 text-center p-3"},d0=s(()=>e("img",{class:"rounded img-fluid",src:Ce,alt:"Room Image"},null,-1)),i0=s(()=>e("div",{class:"py-3"},null,-1)),c0=s(()=>e("div",{class:"d-flex"},[e("span",null,[e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"}),i(" 房間格局 ")])],-1)),r0=s(()=>e("div",{class:"py-3"},null,-1)),u0={class:"bg-white rounded p-4 text-center"},m0=s(()=>e("div",{class:"py-3"},null,-1)),v0=s(()=>e("div",{class:"d-flex"},[e("span",null,[e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"}),i(" 房內設備 ")])],-1)),p0=s(()=>e("div",{class:"py-3"},null,-1)),_0={class:"bg-white rounded p-4 text-center"},h0=s(()=>e("div",{class:"py-3"},null,-1)),f0=s(()=>e("div",{class:"d-flex"},[e("span",null,[e("img",{class:"rounded img-fluid",src:m,alt:"Room Image"}),i(" 備品提供 ")])],-1)),g0=s(()=>e("div",{class:"py-3"},null,-1)),b0={class:"bg-white rounded p-4 text-center"},y0={class:"p-5 col-md-5 rounded bg-white h-25 text-black"},C0={class:""},w0=["src"],x0=s(()=>e("div",{class:"py-3"},[e("h3",{class:"fw-bold"},"價格詳情")],-1)),I0=s(()=>e("div",{class:"py-1 d-flex justify-content-between"},[e("span",null," NT$ 10,000 X 2 晚 "),e("span",null," NT$ 20,000 ")],-1)),V0=s(()=>e("div",{class:"py-2 d-flex justify-content-between"},[e("span",null," 住宿折扣 "),e("span",null," -NT$ 1,000 ")],-1)),R0={class:"py-2 fw-bold d-flex justify-content-between"},L0=s(()=>e("span",null," 總價 ",-1)),N0=s(()=>e("div",{class:"modal fade",id:"confirmationModal",tabindex:"-1",role:"dialog","aria-labelledby":"confirmationModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog",role:"document"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"confirmationModalLabel"},"Confirming Reservation")]),e("div",{class:"modal-body"})])])],-1)),D0=ce({__name:"RoomReserved",setup(g){const G=re(),c=ue(),n=JSON.parse(localStorage.getItem("user")),{id:D,startdate:J,days:X,people:Y}=G.params,a=l({_id:n==null?void 0:n._id,name:"",phone:"",birthday:new Date(n==null?void 0:n.birthday).toLocaleDateString(),address:{zipcode:100,detail:""},email:"",createdAt:"",updatedAt:""});function q(){a.value.name=n.name,a.value.phone=n.phone,a.value.address.detail=n.address.detail,a.value.email=n.email,a.value.address.zipcode=n.address.zipcode}l("");const K=l({CityName:"",CityEngName:"",AreaList:[]});me(()=>{N.forEach(d=>{d.AreaList.find(r=>Number(r.ZipCode)===n.address.zipcode)&&(b.value=d.CityName,K.value=d)}),se(),Q(),ee()});function Q(){a.value.address}const C=a.value.birthday.split("/"),H=l(Number(C[0])),w=l(Number(C[1]));l(Number(C[2]));const x=l(31),k=()=>{w.value===2?x.value=H.value%4?28:29:[1,3,5,7,8,10,12].includes(w.value)?x.value=31:x.value=30};async function W(){const d=await V("/api/v1/user/check","GET",""),{status:t}=d;if(t){const r={roomId:D,checkInDate:J,checkOutDate:X,peopleNum:Y,userInfo:{address:{zipcode:802,detail:a.value.address},name:a.value.name,phone:a.value.phone,email:a.value.email}},o=await V("/api/v1/orders","POST",r),{status:I}=o;I&&c.push("/BookingResult")}else c.replace("login")}const _=l(""),M=l(""),$=l(""),B=l([]),U=l([]),Z=l([]),A=l(""),S=l(""),j=l(""),T=l("");async function ee(){const t=await V(`/api/v1/rooms/${D}`,"GET",""),{status:r}=t;if(r){const{areaInfo:o,bedInfo:I,amenityInfo:te,facilityInfo:oe,layoutInfo:ae,maxPeople:le,name:ne,price:de,imageUrl:ie}=t.result;M.value=o,B.value=ae,$.value=I,A.value=`1-${le}人`,j.value=ne,T.value=de,U.value=oe,Z.value=te,S.value=ie}}E(()=>H.value,k),E(()=>w.value,k);const z=l([]),b=l(""),se=()=>{const d=N.find(t=>t.CityName===b.value);console.log(d),z.value=d.AreaList};return(d,t)=>{const r=ve("tel");return h(),f("main",we,[e("div",xe,[e("div",Ie,[e("div",Ve,[e("button",{type:"button",class:"p-0 border-0 text-primary",onClick:t[0]||(t[0]=o=>v(c).push(`/rooms/${_.value}`))},Le),e("button",{type:"button",class:"p-0 border-0",onClick:t[1]||(t[1]=o=>v(c).push(`/rooms/${_.value}`))}," 確認訂房資訊 ")])]),e("div",Ne,[e("div",De,[e("div",He,[ke,e("div",Me,[e("span",null,[$e,i(" 選擇房型 "),Be,i(" "+u(j.value),1)]),e("button",{type:"button",class:"p-0 border-0 text-primary",onClick:t[2]||(t[2]=o=>v(c).push(`/rooms/${_.value}`))}," 編輯 ")]),e("div",Ue,[Ze,e("button",{type:"button",class:"p-0 border-0 text-primary",onClick:t[3]||(t[3]=o=>v(c).push(`/rooms/${_.value}`))}," 編輯 ")]),e("div",Ae,[Se,e("button",{type:"button",class:"p-0 border-0 text-primary",onClick:t[4]||(t[4]=o=>v(c).push(`/rooms/${_.value}`))}," 編輯 ")]),je,Te,e("div",{class:"py-1 d-flex justify-content-between"},[ze,e("button",{type:"button",class:"p-0 border-0 text-primary",onClick:q}," 套用會員資料 ")]),e("form",Ee,[Fe,p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.name=o),id:"name",type:"text",class:"form-control",placeholder:"請輸入姓名","aria-label":"Username","aria-describedby":"addon-wrapping"},null,512),[[y,a.value.name]]),Oe,Pe,p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.phone=o),id:"name",type:"text",class:"form-control",placeholder:"請輸入手機號碼","aria-label":"Username","aria-describedby":"addon-wrapping"},null,512),[[y,a.value.phone],[r]]),Ge,Je,p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>a.value.email=o),id:"name",type:"text",class:"form-control",placeholder:"請輸入電子信箱","aria-label":"Username","aria-describedby":"addon-wrapping"},null,512),[[y,a.value.email]]),Xe,Ye,e("div",qe,[p(e("select",{id:"address",class:"form-select p-3 rounded-3","onUpdate:modelValue":t[8]||(t[8]=o=>b.value=o)},[(h(!0),f(O,null,P(v(N),o=>(h(),f("option",{key:o.CityName,value:o.CityName},u(o.CityName),9,Ke))),128))],512),[[F,b.value]]),p(e("select",{class:"form-select p-3 rounded-3","onUpdate:modelValue":t[9]||(t[9]=o=>a.value.address.zipcode=o)},[(h(!0),f(O,null,P(z.value,o=>(h(),f("option",{key:o.ZipCode,value:o.ZipCode},u(o.AreaName),9,Qe))),128))],512),[[F,a.value.address.zipcode]])]),We,p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>a.value.address.detail=o),id:"name",type:"text",class:"form-control",placeholder:"請輸入詳細地址","aria-label":"Username","aria-describedby":"addon-wrapping"},null,512),[[y,a.value.address.detail]])]),e0,e("div",s0,[e("span",t0,[o0,e("div",null,u(M.value),1)]),e("span",a0,[l0,e("div",null,u($.value),1)]),e("span",n0,[d0,e("div",null,u(A.value),1)])]),i0,c0,r0,e("div",u0,[R(L,{service:B.value},null,8,["service"])]),m0,v0,p0,e("div",_0,[R(L,{service:U.value},null,8,["service"])]),h0,f0,g0,e("div",b0,[R(L,{service:Z.value},null,8,["service"])])]),e("div",y0,[e("div",C0,[e("img",{class:"rounded img-fluid",src:S.value},null,8,w0)]),x0,I0,V0,e("div",R0,[L0,e("span",null," NT$ "+u(T.value),1)]),e("div",{class:"d-flex justify-content-center"},[e("button",{class:"btn btn-primary w-100",onClick:W},"確認訂房")])])])])]),N0])}}}),$0=fe(D0,[["__scopeId","data-v-34ecc2ec"]]);export{$0 as default};
